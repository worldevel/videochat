(self.webpackChunkConnect=self.webpackChunkConnect||[]).push([[8082],{82850:(e,n,t)=>{"use strict";t.d(n,{CM:()=>r,Ix:()=>o,Yd:()=>s,cT:()=>i});var a=t(98333);function o(e,n){return(0,a.eE)({url:e.url,method:"post",data:e.data,upload:!0,config:{headers:{"Content-Type":"multipart/form-data"}},headers:{"Content-Type":"multipart/form-data; charset=utf-8; boundary="+Math.random().toString().substr(2)},onUploadProgress:n})}function r(e){return(0,a.eE)({url:e.url,method:"delete",data:e.data})}function i(e,n,t){var o={url:e.url,method:"post",data:e.data,upload:!0,config:{headers:{"Content-Type":"multipart/form-data"}},headers:{"Content-Type":"multipart/form-data; charset=utf-8; boundary="+Math.random().toString().substr(2)},onUploadProgress:n,cancelToken:t};return e.silent?(0,a.kM)(o):(0,a.eE)(o)}function s(e){return(0,a.eE)({url:e.url,method:"delete",data:e.data})}},86728:(e,n,t)=>{"use strict";t.d(n,{Z:()=>s});var a=t(94015),o=t.n(a),r=t(23645),i=t.n(r)()(o());i.push([e.id,".progress-ring-wrapper{align-items:center;background:hsla(0,0%,100%,.7);bottom:0;display:flex;height:100%;justify-content:center;left:0;padding-bottom:2.5rem;position:absolute;right:0;top:0;width:100%;z-index:1}","",{version:3,sources:["webpack://./resources/js/components/ImageUploader.vue"],names:[],mappings:"AAmRA,uBAWI,kBAAA,CAHA,6BAAA,CAJA,QAAA,CAKA,YAAA,CAFA,WAAA,CAGA,sBAAA,CAPA,MAAA,CASA,qBAAA,CAXA,iBAAA,CAIA,OAAA,CAHA,KAAA,CAIA,UAAA,CAOA,SAlRJ",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.progress-ring-wrapper {\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(255,255,255,0.7);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding-bottom: 2.5rem;\n    z-index: 1;\n}\n"],sourceRoot:""}]);const s=i},96278:e=>{e.exports="/images/default-profile-image-female-kid.png?1e7031302fcbe88e852f5048995c54c3"},73070:e=>{e.exports="/images/default-profile-image-female-teen.png?0febad6ecbb15c43511ad888d0ed6355"},26975:e=>{e.exports="/images/default-profile-image-female.png?e1f248765c6f1117cb24b060614d931e"},61910:e=>{e.exports="/images/default-profile-image-male-kid.png?bdf756bb159c95a20ce464fbaaeec9fb"},13701:e=>{e.exports="/images/default-profile-image-male-teen.png?085d52319fdbc99b3159dbc9636272e4"},93705:e=>{e.exports="/images/default-profile-image-male.png?eebf809dd3e86444ebed4aa2bc6603b8"},28769:(e,n,t)=>{"use strict";t.d(n,{Z:()=>f});var a=t(69470),o=t(82850),r=t(20629);function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const d={name:"image-uploader",props:{existingImage:{type:String,default:""},existingMedia:{type:Object,default:null},placeholder:{type:String,default:"https://via.placeholder.com/200/e1e2e4/b1b2b4/?text=Upload%20Image"},url:{type:String,required:!0},buttonColor:{type:String,default:"primary"},actionLabel:{type:String,default:"global.choose"},nameLabel:{type:String,default:"upload.image"},darkBg:{type:Boolean,default:!1},profile:{type:Boolean,default:!1},showUploadButton:{type:Boolean,default:!0},removeButton:{type:Boolean,default:!0},removeFromServer:{type:Boolean,default:!0},showProgress:{type:Boolean,default:!0},size:{type:String,default:""},fieldName:{type:String,default:"file"}},data:function(){return{isLoading:!1,imageRemoved:!1,uploadedImage:"",imageToUpload:"",actionLabelUpdated:"",files:[]}},computed:s(s({},(0,r.Se)("config",["configs","vars"])),{},{imageSource:function(){var e=this.imageToUpload?this.imageToUpload:this.uploadedImage?this.uploadedImage:this.existingImage?this.existingImage:"";return e||this.placeholder},computedActionLabel:function(){return this.existingImage||this.uploadedImage?"global.change":this.actionLabel},showWhileUploading:function(){return!(!this.imageToUpload||!this.files[0]||"uploading"!==this.files[0].status)}}),methods:{generateImagePreview:function(e){var n=this;this.isLoading=!0;setTimeout((function(){for(var e=n.$refs.file.files,t=/(\.jpg|\.jpeg|\.png|\.gif|\.bmp)$/i,a=0;a<e.length;a++)t.test(e[a].name)?n.configs.system&&n.configs.system.postMaxSize&&e[a].size>n.configs.system.postMaxSize?(n.isLoading=!1,n.$toasted.error(n.$t("global.file_too_large",{attribute:e[a].name}),n.$toastConfig.error)):n.files.push({uuid:uuid(),file:e[a],status:"waiting",progress:0}):(n.isLoading=!1,n.$toasted.error(n.$t("global.file_not_supported",{attribute:e[a].name.split(".").pop()}),n.$toastConfig.error));n.files.length?n.createImage(n.files[0].file):n.isLoading=!1}),1e3)},createImage:function(e){var n=this,t=new FileReader;t.onload=function(e){n.imageToUpload=e.target.result},t.onerror=function(e){console.error("File could not be read! Code "+e.target.error.code)},t.readAsDataURL(e),this.isLoading=!1},cancelUpload:function(){this.files=[],this.imageToUpload=""},uploadImage:function(){var e=this,n=this.files[0];n.status="waiting";var t=new FormData;this.files[0].file&&this.files[0].file.size>this.configs.system.postMaxSize?this.$toasted.error(this.t("upload.file_too_large"),this.$toastConfig.error):(t.append(this.fieldName,this.files[0].file),n.status="uploading",o.Ix({url:this.url,data:t},(function(e){n.progress=Math.round(100*e.loaded/e.total)})).then((function(t){n.status="uploaded",delete n.cancel,e.$toasted.success(t.message,e.$toastConfig.success),e.imageToUpload="",e.files=[],e.uploadedImage=t.image,e.$emit("uploaded",t.image)})).catch((function(t){n.status="error",e.$emit("error",t),formUtil.handleErrors(t)})))},removeImage:function(){var e=this;this.removeFromServer?formUtil.confirmAction().then((function(n){n.value&&(e.isLoading=!0,o.CM({url:e.url}).then((function(n){e.$toasted.success(n.message,e.$toastConfig.success),e.imageRemoved=!0,e.uploadedImage="",e.$emit("removed"),e.isLoading=!1})).catch((function(n){e.isLoading=!1,e.formErrors=formUtil.handleErrors(n)})))})):(this.imageRemoved=!0,this.uploadedImage="",this.$emit("removed"))},startUpload:function(){this.files.length?this.uploadImage():this.$emit("noNeed")}},mounted:function(){a.Z.$off("START_UPLOAD",this.startUpload),a.Z.$on("START_UPLOAD",this.startUpload),a.Z.$off("CANCEL_UPLOAD",this.cancelUpload),a.Z.$on("CANCEL_UPLOAD",this.cancelUpload),this.uploadButtonText=this.label},destroyed:function(){a.Z.$off("START_UPLOAD",this.startUpload),a.Z.$off("CANCEL_UPLOAD",this.cancelUpload)}};var c=t(93379),u=t.n(c),g=t(86728),p={insert:"head",singleton:!1};u()(g.Z,p);g.Z.locals;const f=(0,t(51900).Z)(d,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{class:["sm-uploader image-uploader",e.size]},[t("animated-loader",{attrs:{"is-loading":e.isLoading||!e.showProgress&&e.showWhileUploading,"loader-color":e.vars.loaderColor}}),e._v(" "),e.showProgress&&e.showWhileUploading?t("div",{staticClass:"progress-ring-wrapper"},[t("progress-ring",{attrs:{value:e.files[0].progress,"stroke-color":e.vars.loaderColor}})],1):e._e(),e._v(" "),e.imageSource?t("div",{class:["image-display-wrapper",{"dark-bg":e.darkBg}]},[t("div",{class:["image-display",{"image-profile":e.profile}]},[e.imageToUpload?t("img",{staticClass:"img-responsive",attrs:{src:e.imageToUpload}}):t("img",{staticClass:"img-responsive",attrs:{src:e.imageSource}})]),e._v(" "),e.imageToUpload?t("div",{staticClass:"submit-actions"},[t("base-button",{attrs:{type:"button",design:"light",size:"sm"},on:{click:e.cancelUpload}},[t("i",{staticClass:"fas fa-times"}),e._v(" "+e._s(e.$t("general.cancel")))]),e._v(" "),e.showUploadButton?t("base-button",{attrs:{type:"button",design:"success",size:"sm"},on:{click:e.uploadImage}},[t("i",{staticClass:"fas fa-arrow-circle-right"}),e._v(" "+e._s(e.$t("general.upload")))]):t("base-button",{attrs:{type:"button",design:e.buttonColor,size:"sm"}},[t("i",{staticClass:"far fa-image"}),e._v(" "+e._s(e.$t("global.change",{attribute:e.$t(e.nameLabel)})))])],1):e._e()]):e._e(),e._v(" "),e.imageToUpload?e._e():t("div",{staticClass:"image-uploader-form"},[e.existingImage&&e.removeButton?t("div",{staticClass:"existing-image-actions"},[t("base-button",{attrs:{type:"button",design:"danger",size:"sm"},on:{click:e.removeImage}},[t("i",{staticClass:"fas fa-trash"}),e._v(" "+e._s(e.$t("general.remove")))])],1):e._e(),e._v(" "),t("div",{staticClass:"file-selector"},[t("label",{class:"btn btn-"+e.buttonColor+" btn-sm"},[t("input",{ref:"file",staticClass:"selector-input",attrs:{name:"file",type:"file",id:"file",accept:"image/*"},on:{change:e.generateImagePreview}}),e._v(" "),e._m(0),e._v(" "),t("span",{staticClass:"button-label"},[e._v(e._s(e.$t(e.computedActionLabel,{attribute:e.$t(e.nameLabel)})))])])])])],1)}),[function(){var e=this.$createElement,n=this._self._c||e;return n("span",{staticClass:"button-icon"},[n("i",{staticClass:"fas fa-upload"})])}],!1,null,null,null).exports},21154:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>U});var a=t(28769),o=t(20629),r=t(51358),i=t(61910),s=t.n(i),l=t(96278),d=t.n(l),c=t(13701),u=t.n(c),g=t(73070),p=t.n(g),f=t(93705),m=t.n(f),h=t(26975),b=t.n(h);function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){y(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function y(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const C={components:{ImageUploader:a.Z},data:function(){return{isLoading:!1}},computed:A(A({},(0,o.Se)("config",["configs","vars"])),(0,o.Se)("user",["loggedInUser"])),methods:A(A(A({},(0,o.nv)("common",["Init","Custom"])),(0,o.nv)("user",["GetUser"])),{},{handleUploadError:function(e){this.$toasted.error(e,this.$toastConfig.error)},getUserImage:function(e,n){if(!e)return m();if("male"===e.uuid){if(n){if(n.years<13)return s();if(n.years<18)return u()}return m()}if(n){if(n.years<13)return d();if(n.years<18)return p()}return b()},getInitialData:function(){var e=this;this.isLoading=!0,this.GetUser().then((function(n){e.isLoading=!1})).catch((function(n){e.isLoading=!1,r.handleErrors(n)}))}}),mounted:function(){this.Init({url:"users"}),this.getInitialData()}};const U=(0,t(51900).Z)(C,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("base-container",{attrs:{boxed:"","with-loader":"","is-loading":e.isLoading,"loader-color":e.vars.loaderColor}},[e.loggedInUser?t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[t("h4",{staticClass:"text-center mb-5"},[e._v(e._s(e.$t("global.upload",{attribute:e.$t("user.props.image")}))+" for "+e._s(e.loggedInUser.name))]),e._v(" "),t("hr")]),e._v(" "),t("div",{staticClass:"col-12 col-md-6 d-flex justify-content-center"},[t("image-uploader",{attrs:{url:"/profile/avatar","name-label":"user.props.image","existing-image":e.loggedInUser.avatar,placeholder:e.getUserImage(e.loggedInUser.gender,e.loggedInUser.age),"remove-from-server":"",profile:""},on:{uploaded:e.getInitialData,removed:e.getInitialData}})],1),e._v(" "),t("div",{staticClass:"col-12 col-md-6 d-flex justify-content-center"},[t("image-uploader",{attrs:{url:"/profile/avatar?type=cover","name-label":"user.props.cover_image","existing-image":e.loggedInUser.cover,placeholder:e.getUserImage(e.loggedInUser.gender,e.loggedInUser.age),"remove-from-server":""},on:{uploaded:e.getInitialData,removed:e.getInitialData}})],1)]):e._e(),e._v(" "),t("div",{staticClass:"form-footer mt-5"},[t("div",{staticClass:"left-side"},[t("base-button",{attrs:{type:"button",design:"light",tabindex:"-1"},on:{click:function(n){return e.$router.back()}}},[t("i",{staticClass:"fas fa-chevron-left"}),e._v(" "+e._s(e.$t("general.back")))])],1)])])}),[],!1,null,null,null).exports}}]);