"use strict";(self.webpackChunkConnect=self.webpackChunkConnect||[]).push([[2640],{12133:(n,e,t)=>{t.d(e,{Z:()=>a});var s=t(94015),r=t.n(s),o=t(23645),i=t.n(o)()(r());i.push([n.id,".table-wrapper.has-checkbox .custom-control-label:after,.table-wrapper.has-checkbox .custom-control-label:before{top:-1rem}","",{version:3,sources:["webpack://./resources/js/views/app/config/permission/index.vue"],names:[],mappings:"AAmII,iHACI,SA/HR",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.table-wrapper.has-checkbox .custom-control-label {\n    &:before {\n        top: -1rem;\n    }\n    &:after {\n        top: -1rem;\n    }\n}\n"],sourceRoot:""}]);const a=i},9024:(n,e,t)=>{t.r(e),t.d(e,{default:()=>f});var s=t(98333),r="/config/permissions";function o(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,s)}return t}function i(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o(Object(t),!0).forEach((function(e){a(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function a(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const u={data:function(){return{activeModule:"config",formData:{roles:[]},preRequisite:{roles:[],permissions:[],modules:[],assignedPermissions:[]},formErrors:{},initialFormData:null,isLoading:!1}},computed:i({},(0,t(20629).Se)("config",["vars"])),methods:{submit:function(){var n,e=this;this.isLoading=!0,(n=i(i({},this.formData),{},{module:this.activeModule}),(0,s.ZP)({url:r+"/assign",method:"post",data:n})).then((function(n){e.isLoading=!1,e.$toasted.success(n.message,e.$toastConfig.success)})).catch((function(n){e.isLoading=!1,e.formErrors=formUtil.handleErrors(n)}))},getInitialData:function(){var n,e=this;this.isLoading=!0,this.$route.query&&this.$route.query.module&&(this.activeModule=this.$route.query.module),(n=this.activeModule,(0,s.ZP)({url:r+"/pre-requisite",method:"get",params:{module:n}})).then((function(n){e.preRequisite=_.cloneDeep(n),e.formData.roles=[],e.preRequisite.roles.forEach((function(n){var t=e.preRequisite.assignedPermissions.find((function(e){return e.role.toUpperCase()===n.name.toUpperCase()}));e.formData.roles.push({name:n.name,permissions:"undefined"!=t?t.permissions:[]})})),e.isLoading=!1})).catch((function(n){e.isLoading=!1,e.formErrors=formUtil.handleErrors(n)}))},humanize:function(n){return _.startCase(n)},updateRouteQuery:function(n){var e=Object.assign({},this.$route.query,n);this.$router.push({path:this.$route.path,query:e})}},mounted:function(){this.getInitialData()},watch:{$route:function(){this.getInitialData()}}};var l=t(93379),c=t.n(l),p=t(12133),d={insert:"head",singleton:!1};c()(p.Z,d);p.Z.locals;var m=(0,t(51900).Z)(u,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("base-container",{staticClass:"p-0 flex-grow",attrs:{boxed:"","with-loader":"","is-loading":n.isLoading,"loader-color":n.vars.loaderColor}},[t("div",{staticClass:"text-right p-4"},[t("base-dropdown",{attrs:{tag:"div",direction:"down","menu-classes":"show-dropdown-up",position:"right"}},[t("base-button",{attrs:{slot:"title",type:"button","data-toggle":"dropdown",role:"button",design:"info",size:"md"},slot:"title"},[t("i",{staticClass:"fas fa-boxes"}),n._v(" "+n._s(n.$t(n.activeModule+"."+n.activeModule))+" "),t("i",{staticClass:"fas fa-chevron-down"})]),n._v(" "),n._l(n.preRequisite.modules,(function(e){return t("a",{staticClass:"dropdown-item",on:{click:function(t){return n.updateRouteQuery({module:e})}}},[n._v("\n                "+n._s(n.$t(e+"."+e))+"\n                "),e==n.activeModule?t("i",{staticClass:"fas fa-check pull-right"}):n._e()])}))],2)],1),n._v(" "),t("div",{staticClass:"table-responsive table-wrapper"},[t("form",{on:{submit:function(e){return e.preventDefault(),n.submit.apply(null,arguments)}}},[t("table",{staticClass:"table b-table table-striped table-hover b-table-stacked-sm"},[t("thead",[t("tr",[t("th",[n._v(n._s(n.$t("config.permission.permissions")))]),n._v(" "),n._l(n.formData.roles,(function(e){return t("th",[n._v(n._s(n.humanize(e.name)))])}))],2)]),n._v(" "),t("tbody",n._l(n.preRequisite.permissions,(function(e){return t("tr",[t("td",[n._v(n._s(n.humanize(e)))]),n._v(" "),n._l(n.formData.roles,(function(s){return t("td",[t("base-checkbox",{staticClass:"ml-3",attrs:{value:e,disabled:"admin"===s.name},model:{value:s.permissions,callback:function(e){n.$set(s,"permissions",e)},expression:"rolePermission.permissions"}})],1)}))],2)})),0)]),n._v(" "),t("div",{staticClass:"text-right mt-5 px-4 mb-4"},[t("base-button",{attrs:{type:"submit",design:"primary"}},[n._v(n._s(n.$t("global.save",{attribute:n.$t("config.permission.permissions")})))])],1)])])])}),[],!1,null,null,null);const f=m.exports}}]);